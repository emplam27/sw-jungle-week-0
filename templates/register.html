<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>서비스 이름</title>
    <link rel="stylesheet" href="{{url_for('static', filename='css/bulma.css')}}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.14.0/js/all.js"></script>
  </head>
  <body>
  <section class="section">
    <div class="register-form-container">

      {% if result %}
        <p id="register-result" style="display: none;">{{ result }}</p>
        <p id="register-msg" style="display: none;">{{ msg }}</p>
      {% endif %}

      <form id="register-form" action="/register" method = "POST">
        <p class="title">교육생 검증 정보</p>
        <p class="subtitle">SW사관학교 정글 교육생을 확인합니다.</p>
        <div class="field">
          <label class="label">이름</label>
          <div class="control has-icons-left">
            <input class="input" name="username" type="text" value="{{ formdata.username }}" placeholder="사용자 이름을 입력해주세요.">
            <span class="icon is-small is-left">
              <i class="fas fa-user"></i>
            </span>
          </div>
        </div>
        
        <div class="field">
          <label class="label">이메일</label>
          <div class="control has-icons-left">
            <input class="input" name="email" type="email" value="{{ formdata.email }}" placeholder="SW사관학교 정글에서 사용되는 이메일을 입력해주세요.">
            <span class="icon is-small is-left">
              <i class="fas fa-envelope"></i>
            </span>
          </div>
        </div>
        
        <div class="field">
          <label class="label">기수</label>
          <div class="control">
            <div class="select">
              <select name="ordinal" value="{{ formdata.ordinal }}">
                <option>1기</option>
                <option>2기</option>
                <option>3기</option>
                <option>4기</option>
                <option>5기</option>
                <option>6기</option>
                <option>7기</option>
                <option>8기</option>
                <option>9기</option>
                <option>10기</option>
              </select>
            </div>
          </div>
        </div>
        <br/>
        <p class="title">가입용 정보</p>
        <p class="subtitle">해당 서비스에서 사용할 정보를 입력해주세요.</p>
        <div class="field">
          <label class="label">아이디</label>
          <div class="control">
            <input name="userid" class="input" type="text" value="{{ formdata.userid }}" placeholder="아이디를 입력해주세요.">
          </div>
        </div>
        
        <div class="field">
          <label class="label">비밀번호</label>
          <div class="control">
            <input name="password" class="input" type="text" placeholder="비밀번호를 입력해주세요.">
          </div>
        </div>
        
        <div class="field">
          <label class="label">비밀번호 확인</label>
          <div class="control">
            <input name="re_password" class="input" type="text" placeholder="다시한번 입력해주세요.">
          </div>
        </div>
        <br/>
        <button type="submit" class="button is-link">가입하기</button>
      </form>
    </div>
  </section>
  </body>
</html>

<script>
  const registerResult = document.getElementById('register-result').innerText
  const registerMsg = document.getElementById('register-msg').innerText
  console.log(registerResult);
  console.log(registerMsg);
  if (registerResult) {
    if (registerMsg === '회원가입 되었습니다.') {
      window.location.href = '/'
    }
    alert(registerMsg)
  } 
</script>

<style>
.section {
  display: flex;
  justify-content: center;
  align-items: center;
}

.register-form-container {
  width: 40%;
}
</style>